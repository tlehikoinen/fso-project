(this["webpackJsonp@project/client"]=this["webpackJsonp@project/client"]||[]).push([[0],{63:function(e,t,n){"use strict";n.r(t);var r=n(0),s=n(15),c=n.n(s),a=n(11),u=n(14),i=n(31),o=n(32),j=n(4),d=n.n(j),p=n(10),l=n(17),b=n.n(l),f="/api/test",g=function(){var e=Object(p.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get(f);case 2:return t=e.sent,console.log(t.data),e.abrupt("return",t.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h={addMessage:function(){var e=Object(p.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.post(f,{message:t});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),deleteMessage:function(){var e=Object(p.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.delete("".concat(f,"/").concat(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getAll:g},O=function(e){return{type:"REMOVE_MESSAGE",id:e}},m=function(e){return console.log("setmessages",e),{type:"SET_MESSAGES",messages:e}},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{messages:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REMOVE_MESSAGE":return e.messages=e.messages.filter((function(e){return e._id!==t.id})),e;case"SET_MESSAGE":return e.messages=e.messages.concat(t.message),e;case"SET_MESSAGES":return e.messages=t.messages,console.log("state, ",e),e;default:return e}},v=Object(u.combineReducers)({messages:x}),E=Object(u.createStore)(v,Object(o.composeWithDevTools)(Object(u.applyMiddleware)(i.a))),S=n(18),w=n(3),y=n(33),M=n(1),k=function(e){var t=e.message,n=Object(a.b)(),r=function(){var e=Object(p.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.deleteMessage(t);case 2:202===e.sent.status&&n(O(t));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(M.jsxs)("div",{children:[t.content," ",Object(M.jsx)("button",{onClick:function(){return r(t._id)},children:"delete"})]})},_=function(){var e=Object(a.b)(),t=Object(a.c)((function(e){return e.messages.messages})),n=Object(r.useState)(""),s=Object(y.a)(n,2),c=s[0],u=s[1],i=function(){var t=Object(p.a)(d.a.mark((function t(n){var r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,h.addMessage(c);case 3:200===(r=t.sent).status&&(e({type:"SET_MESSAGE",message:r.data}),u(""));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return t?Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)("h2",{children:"Message header"}),t.map((function(e){return Object(M.jsx)(k,{message:e},e._id)})),Object(M.jsx)("div",{children:Object(M.jsxs)("form",{onSubmit:function(e){return i(e)},children:[Object(M.jsx)("input",{type:"text",value:c,onChange:function(e){u(e.target.value)}})," ",Object(M.jsx)("button",{type:"submit",children:"submit"})]})})]}):Object(M.jsx)(M.Fragment,{children:"Loading..."})},A=function(){return Object(M.jsx)("div",{children:Object(M.jsx)("h1",{children:"Welcome, and leave a message!"})})},G=function(){var e=Object(a.b)();return Object(r.useEffect)((function(){e(function(){var e=Object(p.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.getAll();case 2:n=e.sent,console.log("getmessagesfromserver",n),t(m(n));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[e]),Object(M.jsxs)(S.a,{children:[Object(M.jsxs)("div",{children:[Object(M.jsx)(S.b,{style:{padding:"10px"},to:"/",children:"home"}),Object(M.jsx)(S.b,{style:{padding:"10px"},to:"/Messages",children:"messages"})]}),Object(M.jsxs)(w.c,{children:[Object(M.jsx)(w.a,{path:"/Messages",exact:!0,children:Object(M.jsx)(_,{})}),Object(M.jsx)(w.a,{path:"/",children:Object(M.jsx)(A,{})})]})]})};c.a.render(Object(M.jsx)(a.a,{store:E,children:Object(M.jsx)(G,{})}),document.getElementById("root"))}},[[63,1,2]]]);
//# sourceMappingURL=main.0ba4c166.chunk.js.map